(e=>{let t=(e,t,r)=>e.querySelectorAll(t).forEach(r),r=e=>t(e,"template[_]",(e=>{t(document,e.getAttribute("_"),(r=>{let l=e.innerHTML;e.getAttributeNames().forEach((t=>"_"!=t&&(l=l.replaceAll("{"+t+"}",r.getAttribute(t)||e.getAttribute(t))))),l=l.replaceAll("{$children}",r.innerHTML),r.innerHTML=l,t(r,"if",(e=>e.replaceWith(...e.getAttributeNames().some((e=>r.hasAttribute(e)))?e.childNodes:[]))),r.outerHTML=r.innerHTML})),e.remove()}));r(document),t(document,"iframe.template-import",(e=>{e.onload=t=>{r(e.contentDocument),e.remove()}}))})();