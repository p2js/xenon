(e=>{let t=(e,t)=>e.querySelectorAll(t),r=e=>t(e,"template[_]").forEach((e=>{t(document,e.getAttribute("_")).forEach((r=>{let o=e.innerHTML;for(let t of e.getAttributeNames().filter((e=>"_"!=e)))o=o.replaceAll("{"+t+"}",r.getAttribute(t)||e.getAttribute(t));o=o.replaceAll("{$children}",r.innerHTML),r.innerHTML=o,t(r,"if").forEach((e=>{e.getAttributeNames().some((e=>r.hasAttribute(e)))?e.replaceWith(...e.childNodes):e.remove()})),r.outerHTML=r.innerHTML})),e.remove()}));r(document),t(document,"iframe.template-import").forEach((e=>{e.onload=t=>{r(e.contentDocument),e.remove()}}))})();