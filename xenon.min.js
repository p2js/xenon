(e=>{let t=(e,t,r)=>e.querySelectorAll(t).forEach(r),r=(e,t)=>e.getAttribute(t),l=document,i=e=>t(e,"template[_]",(e=>{t(l,r(e,"_"),(l=>{let i=e.innerHTML,instance=l;for(let t of e.getAttributeNames())"_"!=t&&(i=i.replaceAll("{"+t+"}",r(l,t)||r(e,t)));i=i.replaceAll("{$children}",l.innerHTML),l.innerHTML=i,t(l,"if",(e=>e.replaceWith(...e.getAttributeNames().some((e=>l.hasAttribute(e)))?e.childNodes:[]))),t(l,"script",(e=>e.outerHTML=eval(e.innerHTML)||"")),l.outerHTML=l.innerHTML})),e.remove()}));i(l),t(l,"iframe.template-import",(e=>{e.onload=t=>{i(e.contentDocument),e.remove()}}))})();