(e=>{let t=(e,t,r)=>e?.querySelectorAll(t).forEach(r),r=e=>t(e,"template[_]",(e=>{t(document,e.getAttribute("_"),(r=>{let o=e.innerHTML;e.getAttributeNames().forEach((t=>"_"!=t&&(o=o.replaceAll("{"+t+"}",r.getAttribute(t)||e.getAttribute(t))))),o=o.replaceAll(/{\$(\S+?)}/g,((e,t)=>r[t].outerHTML||r[t])),r.innerHTML=o,t(r,"if",(e=>e.replaceWith(...e.getAttributeNames().some((e=>r.hasAttribute(e)))?e.childNodes:[]))),r.outerHTML=r.innerHTML})),e.remove()}));r(document),t(document,".template-import",(e=>{e.onload=t=>{r(e.contentDocument),e.remove()}}))})();