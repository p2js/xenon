(_=>{let l=(e,t,r)=>e?.querySelectorAll(t).forEach(r),r=e=>l(e,"template[_]",o=>{l(document,o.getAttribute("_"),r=>{let t=o.innerHTML;o.getAttributeNames().forEach(e=>"_"!=e&&(t=t.replaceAll("{"+e+"}",r.getAttribute(e)||o.getAttribute(e)))),t=t.replaceAll(/{\$(\S+?)}/g,(e,t)=>r[t].outerHTML||r[t]),r.innerHTML=t,l(r,"if",e=>e.replaceWith(...e.getAttributeNames().some(e=>r.hasAttribute(e))?e.childNodes:[])),r.outerHTML=r.innerHTML}),o.remove()});r(document),l(document,".template-import",t=>t.onload=e=>{r(t.contentDocument),t.remove()})})();