(e=>{let t=(e,t,r)=>e.querySelectorAll(t).forEach(r),r=(e,t)=>e.getAttribute(t),l=e=>e.remove(),i=document,n=e=>t(e,"template[_]",(e=>{t(i,r(e,"_"),(i=>{let n=e.innerHTML,instance=i;for(let t of e.getAttributeNames().filter((e=>"_"!=e)))n=n.replaceAll("{"+t+"}",r(i,t)||r(e,t));n=n.replaceAll("{$children}",i.innerHTML),i.innerHTML=n,t(i,"if",(e=>e.replaceWith(...e.getAttributeNames().some((e=>i.hasAttribute(e)))?e.childNodes:[]))),t(i,"script",(e=>{eval(e.innerHTML),l(e)})),i.outerHTML=i.innerHTML})),l(e)}));n(i),t(i,"iframe.template-import",(e=>{e.onload=t=>{n(e.contentDocument),l(e)}}))})();